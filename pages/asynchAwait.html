<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript Learning- Asynch Await</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" >
    <link rel="stylesheet" href="../css/prism.css">
    <link rel="stylesheet" href="../css/style.css">

</head>
<body>
    <div class="container mt-2">
        <div class=" w-25 text-center float-right bg-info rounded border p-2">
            <a href="../index.html" class="text-white">Home</a>
        </div>
    </div>
    <div class="container">
        <h2>Javascript Learning Asynch Await</h2>
        <hr>
        <p>Async/await functions, which is a new addition with ES2017.  that help us even more in allowing us to write completely synchronous-looking code while performing asynchronous tasks behind the scenes. 
            The async function always returns a promise. </p>
        <pre><code class="language-javascript">  async function name(param1, param2, ...paramN) {
            // statements
        }</code></pre>
        <ul>
            <li>name - This is the name of the function</li>
            <li>param â€“ This is the parameters that are passed to the function</li>
        </ul>
       <pre><code class="language-javascript"> async function func() {
        console.log('Async/Await tutorial.');
        return Promise.resolve(1);
    }
    func();  </code></pre>
    <p>The await keyword: The await keyword is used to wait for the asynchronous operation. This keyword is used inside the async function. Here is the syntax to use await is:</p>
    <p>The await pauses the async function until the promise returns a result value. When we want to call this function, we prepend await, and the calling code will stop until the promise is resolved or rejected. </p>
    <pre><code class="language-javascript">  async function pradeep(){
        console.log('Inside the pradeep Function');
        const response = await fetch('https://jsonplaceholder.typicode.com/users');
        console.log('before the response');
        const users = await response.json();
        console.log('user resolved');
        return users;
    }
    
    console.log('Before calling pradeep function');
    let test = pradeep();
    console.log('After calling pradeep function');
    console.log(test);
    test.then(data=>{
        console.log(data);
    });
    console.log('Last line of this code');
/* outputs: Before calling pradeep function
            Inside the pradeep Function
            After calling pradeep function
            return users;
            Last line of this code
            before the response
            user resolved
            console.log(data);
*/
</code></pre>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
<script src="../js/prism.js"></script>
<script >
    async function func() {
    // console.log('Async/Await tutorial.');
    return Promise.resolve(1);
}
func().then(function(res) {
    // console.log(res)
});

// 
async function pradeep(){
    console.log('Inside the pradeep Function');
    const response = await fetch('https://jsonplaceholder.typicode.com/users');
    console.log('before the response');
    const users = await response.json();
    console.log('user resolved');
    return users;
}

console.log('Before calling pradeep function');
let test = pradeep();
console.log('After calling pradeep function');
console.log(test);
test.then(data=>{
    console.log(data);
});
console.log('Last line of this code');
</script>
</body>
</html>
